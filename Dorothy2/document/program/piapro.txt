piapro.dms


piapro 用のスクリプトです。

使い方によっては接続先サーバに高い負荷を掛けてしまうことがあるので、十分ご
注意下さい。

一括ダウンロード時に HTML 解析に失敗するようなことがあるかも知れないので、
ファイルを取りこぼしていないか必ず確認して下さい。


使用方法
========

以下の手順で設定ファイル（.ini）が開くので、好みで書き換えて下さい。
  ツール → メインメニュー → 動画ダウンロード設定２
  プログラムを右クリック → 設定

Rename=false にした場合は、フォルダ設定 → キューフォルダ → ファイル名の
重複の設定を、「許可する」を選択し、「確認する」のチェックは外しておいた
方がよいです(関連ファイルの処理で ?view=... が複数登録されるので)。


対応 URL
========

http://piapro.jp/[a-zA-Z][_0-9a-zA-Z]{3,24}
http://piapro.jp/my_page/?view=content
  ユーザーページ トップまたは投稿作品
  その作者の全作品をダウンロード。

http://piapro.jp/content_list/
  ユーザーページまたはコラボページ → 各作品種類(オンガク等)
  開始位置またはページ番号が指定されていればそのページ、
  そうでなければ全ページの作品をダウンロード。

  1ページ目だけダウンロードしたい場合は &start_rec=0 または
  &page=1 を付ける。

http://piapro.jp/collabo_list/
  ユーザーページ コラボ活動 → 各作品種類(オンガク等)

  ページ番号が指定されていればそのページ、そうでなければ全ページの
  作品をダウンロード。

  1ページ目だけダウンロードしたい場合は &page=1 を付ける。

  なおコラボ活動のトップページの場合は、エラー終了します。

http://piapro.jp/collabo/
  コラボページ トップまたは投稿作品
  そのコラボの全作品をダウンロード。

  ※コラボによっては数百～数千作品もあるので注意。

http://piapro.jp/content/[0-9a-zA-Z]{16}
http://piapro.jp/t/[-_0-9a-zA-Z]+
  作品の HTML ページ

http://piapro.jp/download/
  ファイルまたは関連データ

  Cookie の設定のみ行います。ファイル名を指定したい場合は、作品の
  HTML ページをダウンロードして下さい。


仕様・制限事項
==============

・設定で指定したブラウザでログインしておく必要があります。

・ユーザーページ(トップまたは投稿作品)を指定した時、コラボ活動の作品は
  ダウンロードされません。


変更履歴
========

2014-03-31  version 20140331.0  rentan at rentan.org
  GNU GPL v3 or later を適用。
  このファイルを UTF-8 に変更。

  古い形式のファイル名変数 %CONTENT_ID% %CONTENT_SHORT% を削除。

2013-07-13
  サイト仕様の変更に対応。

  ユーザーページ コラボ活動のトップページはエラー終了するようにした。
  リンク先に作品が見つからなかった場合にもともと存在しないのか、抽出
  できなかったかの区別ができないため。

2012-11-19
  Cookie 取得ライブラリを common\browsercookie.dms に変更し、
  IE(保護モード)、Firefox、Chrome、CEF に対応。

2012-07-11
  大幅に変更。

  /t/～ 形式の「前のバージョン」の URL に対応。

2012-04-15
  common\http.dms の仕様変更に対応。

2012-03-29
  common\{http,utf8}.dms を使うようにした。
  ctype2ext.dms を使わないようにした。

2011-12-18
  Dorothy.userPath、Dorothy.userIniPath を使うようにした。
  .ini ファイルの読み込みを common\fnutil.dms に実装。

2011-12-05
  ユーザーページからのダウンロードが出来ない不具合を修正。

  ヘッダの match= を修正。コメント（フィルタリング設定）を修正。

  remove_this() を common/fnutil.dms に移動。
  ソースの簡素化のため、common_load() を冒頭で一括して行うようにした。

2011-09-06
  初期バージョン。


[EOF]
